(window.webpackJsonp=window.webpackJsonp||[]).push([[41],{516:function(s,e,a){"use strict";a.r(e);var t=a(65),u=Object(t.a)({},(function(){var s=this,e=s.$createElement,a=s._self._c||e;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h1",{attrs:{id:"任意组件通信"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#任意组件通信"}},[s._v("#")]),s._v(" 任意组件通信")]),s._v(" "),a("p",[s._v("1、全局事件总线")]),s._v(" "),a("blockquote",[a("p",[s._v("📌安装全局事件总线：")])]),s._v(" "),a("div",{staticClass:"language-vue&#x20;jsx extra-class"},[a("pre",{pre:!0,attrs:{class:"language-vue"}},[a("code",[s._v("new Vue({\n  beforeCreate(){\n    Vue.prototype.$bus = this\n  },\n})\n\n")])])]),a("blockquote",[a("p",[s._v("📌使用事件总线")])]),s._v(" "),a("ol",[a("li",[a("p",[s._v("接收数据：A组件想接收数据，则在A组件中给$bus绑定自定义事件，事件回调在A组件自身。")]),s._v(" "),a("div",{staticClass:"language-vue&#x20;jsx extra-class"},[a("pre",{pre:!0,attrs:{class:"language-vue"}},[a("code",[s._v("xxxxxx(){\n  this.$bus.$on('自定义事件名',回调方法)\n}\n")])])])]),s._v(" "),a("li",[a("p",[s._v("提供数据：")]),s._v(" "),a("div",{staticClass:"language-vue&#x20;jsx extra-class"},[a("pre",{pre:!0,attrs:{class:"language-vue"}},[a("code",[s._v("this.$bus.$emit('xxxx',数据)\n")])])])])]),s._v(" "),a("blockquote",[a("p",[s._v("📌最好在beforeDestroy钩子函数中，使用$off去解绑当前组件所用到的事件。")])]),s._v(" "),a("p",[s._v("2、消息订阅与发布")]),s._v(" "),a("p",[s._v("使用步骤：")]),s._v(" "),a("ol",[a("li",[a("p",[s._v("安装pubsub：")]),s._v(" "),a("div",{staticClass:"language-vue&#x20;jsx extra-class"},[a("pre",{pre:!0,attrs:{class:"language-vue"}},[a("code",[s._v("npm i pubsub-js\n")])])])]),s._v(" "),a("li",[a("p",[s._v("引入")]),s._v(" "),a("div",{staticClass:"language-vue&#x20;jsx extra-class"},[a("pre",{pre:!0,attrs:{class:"language-vue"}},[a("code",[s._v("import pubsub from 'pubsub-js'\n")])])])]),s._v(" "),a("li",[a("p",[s._v("接收数据：A组件接收数据，则在A组件中订阅消息，订阅的回调在A自身")]),s._v(" "),a("div",{staticClass:"language-vue&#x20;jsx extra-class"},[a("pre",{pre:!0,attrs:{class:"language-vue"}},[a("code",[s._v("mounted(){\n  this.pid = pubsub.subscribe('xxx',this.demo) //订阅消息\n}\n")])])])]),s._v(" "),a("li",[a("p",[s._v("提供数据")]),s._v(" "),a("div",{staticClass:"language-vue&#x20;jsx extra-class"},[a("pre",{pre:!0,attrs:{class:"language-vue"}},[a("code",[s._v("pubsub.publish('xxxx',数据)\n")])])])]),s._v(" "),a("li",[a("p",[s._v("最好在beforeDestroy钩子函数中，用Pubsub.unsubscribe(pid)取消订阅")])])])])}),[],!1,null,null,null);e.default=u.exports}}]);