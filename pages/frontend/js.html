<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>JavaScript | 小高笔记</title>
    <meta name="generator" content="VuePress 1.9.7">
    <link ref="icon" href="/favicon.ico">
    <meta name="description" content="">
    
    <link rel="preload" href="/assets/css/0.styles.35bcedcf.css" as="style"><link rel="preload" href="/assets/js/app.d13f59f1.js" as="script"><link rel="preload" href="/assets/js/2.53646e3a.js" as="script"><link rel="preload" href="/assets/js/15.0455f1d1.js" as="script"><link rel="prefetch" href="/assets/js/10.5ccc8fdd.js"><link rel="prefetch" href="/assets/js/11.aa33a8de.js"><link rel="prefetch" href="/assets/js/12.993b4d84.js"><link rel="prefetch" href="/assets/js/13.5507d9bc.js"><link rel="prefetch" href="/assets/js/14.0048d491.js"><link rel="prefetch" href="/assets/js/16.f911e976.js"><link rel="prefetch" href="/assets/js/17.2510d920.js"><link rel="prefetch" href="/assets/js/18.e2e23205.js"><link rel="prefetch" href="/assets/js/19.d5043b46.js"><link rel="prefetch" href="/assets/js/20.07b6a18c.js"><link rel="prefetch" href="/assets/js/21.60063212.js"><link rel="prefetch" href="/assets/js/22.0bc5fe12.js"><link rel="prefetch" href="/assets/js/23.9a2edd04.js"><link rel="prefetch" href="/assets/js/24.dac6e202.js"><link rel="prefetch" href="/assets/js/25.156ad714.js"><link rel="prefetch" href="/assets/js/26.b27149f5.js"><link rel="prefetch" href="/assets/js/27.6d559b79.js"><link rel="prefetch" href="/assets/js/28.c42a444d.js"><link rel="prefetch" href="/assets/js/29.4836f5f1.js"><link rel="prefetch" href="/assets/js/3.bb50f79a.js"><link rel="prefetch" href="/assets/js/30.37b5d171.js"><link rel="prefetch" href="/assets/js/31.919c37fa.js"><link rel="prefetch" href="/assets/js/32.c5479266.js"><link rel="prefetch" href="/assets/js/33.ef7cdcee.js"><link rel="prefetch" href="/assets/js/34.0d49d121.js"><link rel="prefetch" href="/assets/js/35.a96ba84d.js"><link rel="prefetch" href="/assets/js/36.280625b4.js"><link rel="prefetch" href="/assets/js/37.a1358acd.js"><link rel="prefetch" href="/assets/js/38.d6dbc7ba.js"><link rel="prefetch" href="/assets/js/39.97b4bcfd.js"><link rel="prefetch" href="/assets/js/4.35661e66.js"><link rel="prefetch" href="/assets/js/40.684a77c3.js"><link rel="prefetch" href="/assets/js/41.5ef9d50f.js"><link rel="prefetch" href="/assets/js/42.444f193c.js"><link rel="prefetch" href="/assets/js/43.e6bf2917.js"><link rel="prefetch" href="/assets/js/44.6241887c.js"><link rel="prefetch" href="/assets/js/45.ee459281.js"><link rel="prefetch" href="/assets/js/46.42a39b62.js"><link rel="prefetch" href="/assets/js/47.96607b08.js"><link rel="prefetch" href="/assets/js/48.2dc75c63.js"><link rel="prefetch" href="/assets/js/49.1404ad3e.js"><link rel="prefetch" href="/assets/js/5.2a73e3c3.js"><link rel="prefetch" href="/assets/js/50.eaa708d4.js"><link rel="prefetch" href="/assets/js/51.813059e2.js"><link rel="prefetch" href="/assets/js/52.b2b30732.js"><link rel="prefetch" href="/assets/js/53.83e35218.js"><link rel="prefetch" href="/assets/js/54.5114b1c2.js"><link rel="prefetch" href="/assets/js/55.31992a29.js"><link rel="prefetch" href="/assets/js/56.9d768f0f.js"><link rel="prefetch" href="/assets/js/57.ed73a721.js"><link rel="prefetch" href="/assets/js/58.be77d415.js"><link rel="prefetch" href="/assets/js/59.8ef3b6a8.js"><link rel="prefetch" href="/assets/js/6.191aaf39.js"><link rel="prefetch" href="/assets/js/60.4fd87fd0.js"><link rel="prefetch" href="/assets/js/61.361e594c.js"><link rel="prefetch" href="/assets/js/62.3801fa63.js"><link rel="prefetch" href="/assets/js/63.fb124fab.js"><link rel="prefetch" href="/assets/js/64.bdb473d5.js"><link rel="prefetch" href="/assets/js/65.8b14388b.js"><link rel="prefetch" href="/assets/js/66.6ad4e223.js"><link rel="prefetch" href="/assets/js/67.caf1ddfb.js"><link rel="prefetch" href="/assets/js/68.84d22d1b.js"><link rel="prefetch" href="/assets/js/69.2411fe3a.js"><link rel="prefetch" href="/assets/js/7.029c4464.js"><link rel="prefetch" href="/assets/js/70.b310e685.js"><link rel="prefetch" href="/assets/js/71.0e077ea4.js"><link rel="prefetch" href="/assets/js/72.2b6d7f80.js"><link rel="prefetch" href="/assets/js/73.c3e37b24.js"><link rel="prefetch" href="/assets/js/8.37f8fc14.js"><link rel="prefetch" href="/assets/js/9.9b32826c.js">
    <link rel="stylesheet" href="/assets/css/0.styles.35bcedcf.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container no-sidebar"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">小高笔记</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">
  首页
</a></div><div class="nav-item"><a href="/pages/miscellaneous/reg/reg.html" class="nav-link">
  杂记
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端" class="dropdown-title"><span class="title">前端</span> <span class="arrow down"></span></button> <button type="button" aria-label="前端" class="mobile-dropdown-title"><span class="title">前端</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/frontend/htmlcssLearn.html" class="nav-link">
  html+css3+移动前端
</a></li><li class="dropdown-item"><!----> <a href="/pages/frontend/js.html" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  javaScript
</a></li><li class="dropdown-item"><!----> <a href="/pages/frontend/jses6.html" class="nav-link">
  javaScript-es6
</a></li><li class="dropdown-item"><!----> <a href="/pages/frontend/ts.html" class="nav-link">
  typeScript
</a></li><li class="dropdown-item"><!----> <a href="/pages/frontend/nodejs.html" class="nav-link">
  nodeJs
</a></li><li class="dropdown-item"><!----> <a href="/pages/frontend/webpack/webpack.html" class="nav-link">
  webpack
</a></li><li class="dropdown-item"><!----> <a href="/pages/frontend/react/react.html" class="nav-link">
  react
</a></li><li class="dropdown-item"><!----> <a href="/pages/frontend/vue/vue.html" class="nav-link">
  vue
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="后端" class="dropdown-title"><span class="title">后端</span> <span class="arrow down"></span></button> <button type="button" aria-label="后端" class="mobile-dropdown-title"><span class="title">后端</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/backend/java.html" class="nav-link">
  java
</a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">
  首页
</a></div><div class="nav-item"><a href="/pages/miscellaneous/reg/reg.html" class="nav-link">
  杂记
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端" class="dropdown-title"><span class="title">前端</span> <span class="arrow down"></span></button> <button type="button" aria-label="前端" class="mobile-dropdown-title"><span class="title">前端</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/frontend/htmlcssLearn.html" class="nav-link">
  html+css3+移动前端
</a></li><li class="dropdown-item"><!----> <a href="/pages/frontend/js.html" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  javaScript
</a></li><li class="dropdown-item"><!----> <a href="/pages/frontend/jses6.html" class="nav-link">
  javaScript-es6
</a></li><li class="dropdown-item"><!----> <a href="/pages/frontend/ts.html" class="nav-link">
  typeScript
</a></li><li class="dropdown-item"><!----> <a href="/pages/frontend/nodejs.html" class="nav-link">
  nodeJs
</a></li><li class="dropdown-item"><!----> <a href="/pages/frontend/webpack/webpack.html" class="nav-link">
  webpack
</a></li><li class="dropdown-item"><!----> <a href="/pages/frontend/react/react.html" class="nav-link">
  react
</a></li><li class="dropdown-item"><!----> <a href="/pages/frontend/vue/vue.html" class="nav-link">
  vue
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="后端" class="dropdown-title"><span class="title">后端</span> <span class="arrow down"></span></button> <button type="button" aria-label="后端" class="mobile-dropdown-title"><span class="title">后端</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/backend/java.html" class="nav-link">
  java
</a></li></ul></div></div> <!----></nav>  <!----> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="javascript"><a href="#javascript" class="header-anchor">#</a> JavaScript</h1> <p><img src="/assets/img/6.cb9163de.png" alt=""></p> <h4 id="js同步异步问题"><a href="#js同步异步问题" class="header-anchor">#</a> JS同步异步问题</h4> <p>js是单线程的，js引擎首先会初始化执行完所有同步代码，遇到异步任务，会把相应的异步任务会放到浏览器的分线程管理模块中，当同步代码执行完了之后，在去执行异步任务。</p> <p>异步任务分为两种队列：宏队列和微队列，js执行过程如下：</p> <p>在每执行一个宏队列任务时，首先要去检查下微队列是否还存在任务，存在则执行所有微队列任务，执行完成后，再去执行宏队列的任务。</p> <p>一共有六种数据类型</p> <ul><li><p>基本数据类型</p> <ul><li><p>String 字符串</p></li> <li><p>Number 数值</p></li> <li><p>Boolean 布尔值</p></li> <li><p>Null 空值</p></li> <li><p>Undefined 未定义</p></li></ul></li> <li><p>引用类型</p> <ul><li>Object 对象 </li></ul></li></ul> <p>判断：笔试</p> <ul><li><p>typeof</p> <p>数值/字符串/布尔值/undefined/function</p> <p>不能区别null和object和array</p></li> <li><p>instanceof</p> <p>判断对象的具体类型</p></li> <li><p>===</p> <p>null/undefined</p> <p>null和undefined有声明区别？什么时候将变量设置为null？严格区分变量类型和数据类型</p></li></ul> <p><strong>全局作用域</strong></p> <ul><li><p><strong>变量的提前声明</strong></p> <p>使用var关键字声明的变量，会在所有的代码执行之前被声明(但不赋值)，但是如果声明的变量不使用var关键字，则变量不会被声明提前。</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;a=&quot;</span><span class="token operator">+</span>a<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token number">13</span><span class="token punctuation">;</span>
<span class="token comment">//代码解析变成</span>
<span class="token keyword">var</span> a<span class="token punctuation">;</span><span class="token comment">//变量提前</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;a=&quot;</span><span class="token operator">+</span>a<span class="token punctuation">)</span><span class="token punctuation">;</span>
a<span class="token operator">=</span><span class="token number">13</span><span class="token punctuation">;</span>
</code></pre></div></li> <li><p><strong>函数的声明提前</strong></p> <p>使用函数形式创建的函数function 函数名(){}，它会在所有的代码执行之前就创建</p></li></ul> <p><strong>函数作用域</strong></p> <ul><li><p>在调用函数时创建函数作用域，函数执行完毕以后，函数作用域销毁。</p></li> <li><p>每调用一次函数就会创建一个新的函数作用域，他们之间都是相互独立的。</p></li> <li><p>在函数作用域种可以访问到全局作用域的变量</p></li> <li><p>在全局作用域中访问不到函数作用域的变量</p></li> <li><p><strong>在函数作用域中变量的声明和函数的声明也会提前</strong></p></li></ul> <p><strong>this</strong></p> <p>解析器在调用函数每次都会向函数内部传递一个隐含的参数，这个参数就是this，this指向的是一个对象，这个对象称为函数执行的上下文。</p> <p>根据函数的调用方式不同，this会指向不同的对象</p> <ul><li><p>以函数的形式调用，this永远都是window</p></li> <li><p>以方法的形式调用，this就是调用方法的那个对象。</p></li></ul> <p><strong>构造函数</strong></p> <p>创建一个对象，可以使用构造函数去new一个对象。</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">Person</span><span class="token punctuation">(</span><span class="token parameter">name<span class="token punctuation">,</span>age</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>age <span class="token operator">=</span> age<span class="token punctuation">;</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function-variable function">sayName</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
Person p1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
Person p2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
p1<span class="token punctuation">.</span>sayName<span class="token operator">==</span>p2<span class="token punctuation">.</span>sayName <span class="token comment">//false</span>

<span class="token comment">//把sayName函数在每new一个Person对象时，总会生成一个新的sayName，这样导致浪费性能</span>
<span class="token comment">//可以修改成把函数写出来</span>
<span class="token keyword">function</span> <span class="token function">fun</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">function</span> <span class="token function">Person</span><span class="token punctuation">(</span><span class="token parameter">name<span class="token punctuation">,</span>age</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token operator">=</span>name<span class="token punctuation">;</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>age <span class="token operator">=</span> age<span class="token punctuation">;</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>sayName <span class="token operator">=</span> fun<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

Person p1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
Person p2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
p1<span class="token punctuation">.</span>sayName<span class="token operator">==</span>p2<span class="token punctuation">.</span>sayName <span class="token comment">//true</span>
</code></pre></div><p><strong>原型对象</strong></p> <p>将函数定义在全局作用域中，污染类全局作用域的命名空间，可能被别人修改，在多人协作中。</p> <p>原型对象就相当于一个公共的区域，所有同一个类的实例都可以访问到这个原型对象，<strong>可以把对象中所有公共的内容都统一设置到原型对象中。</strong></p> <p><strong>当访问对象的一个属性或方法时，会先在对象自身去寻找，找到则使用，找不到则去原型对象中寻找，如果找到就使用</strong>。</p> <p>原型也是一个对象，也有原型对象。</p> <p><strong>原型</strong>：prototype</p> <p>所创建的每一个函数，解析器在解析时都会向函数添加一个属性prototype，这个属性对应一个对象，这个对象就是原型对象</p> <p>函数以构造函数调用时，它所创建的对象中都会有一个隐含的属性，指向该构造函数的原型对象，我们可以通过**__proto__**来访问该属性。</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">Person</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token operator">...</span><span class="token operator">...</span><span class="token punctuation">.</span>
<span class="token punctuation">}</span>
<span class="token keyword">var</span> p1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
p1<span class="token punctuation">.</span>__proto__ <span class="token comment">//可以访问原型对象</span>
p1<span class="token punctuation">.</span>__proto__ <span class="token operator">==</span> <span class="token class-name">Person</span><span class="token punctuation">.</span>prototype <span class="token comment">//true</span>



<span class="token keyword">function</span> <span class="token function">fun</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">function</span> <span class="token function">Person</span><span class="token punctuation">(</span><span class="token parameter">name<span class="token punctuation">,</span>age</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token operator">=</span>name<span class="token punctuation">;</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>age <span class="token operator">=</span> age<span class="token punctuation">;</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>sayName <span class="token operator">=</span> fun<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

Person p1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
Person p2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
p1<span class="token punctuation">.</span>sayName<span class="token operator">==</span>p2<span class="token punctuation">.</span>sayName <span class="token comment">//true</span>

<span class="token comment">//使用原型修改</span>
<span class="token keyword">function</span> <span class="token function">Person</span><span class="token punctuation">(</span><span class="token parameter">name<span class="token punctuation">,</span>age</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token operator">=</span>name<span class="token punctuation">;</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>age <span class="token operator">=</span> age<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token class-name">Person</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">sayName</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
Person p1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
Person p2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
p1<span class="token punctuation">.</span>sayName<span class="token operator">==</span>p2<span class="token punctuation">.</span>sayName <span class="token comment">//true</span>

</code></pre></div><p><strong>方法的使用</strong>：</p> <ul><li><p>in</p> <p>使用in检查对象中是否含有某个属性时，如果对象中没有，但是原型中有，也会返回true。</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">var</span> mc <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Myclass</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token string">&quot;name&quot;</span> <span class="token keyword">in</span> mc

</code></pre></div></li> <li><p>hasOwnProperty</p> <p>使用该方法检测对象自身是否拥有该属性，只有自身有才会返回true,原型对象中有也不会返回true。</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">var</span> mc <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Myclass</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
mc<span class="token punctuation">.</span><span class="token function">hasOwnProperty</span><span class="token punctuation">(</span><span class="token string">&quot;name&quot;</span><span class="token punctuation">)</span>
</code></pre></div></li></ul> <p>当我们使用一个对象的属性或者方法时，它会在自身中寻找：</p> <ul><li><p>如果自身有，则直接使用。</p></li> <li><p>自身没有，则去原型对象中去查找，如果原型对象中有，则使用。</p></li> <li><p>没有则继续去原型的原型对象中找，直到找到Object对象的原型</p></li> <li><p>Object对象的原型没有原型，如果在Object中依然没有找到，则返回undefined。</p></li></ul> <p><strong>显示原型和隐式原型</strong></p> <ul><li><p>每个函数function都有一个prototype，即为显示原型(属性)</p></li> <li><p>每个实例对象都有一个__proto__,可称为隐式原型(属性)</p></li> <li><p>对象的隐式原型的值为其对应构造函数的显示原型的值</p></li> <li><p>内存结构</p></li> <li><p>总结：</p> <ul><li><p>函数的prototype属性：在定义函数时自动添加，默认值是一个空Object对象</p></li> <li><p>对象的__proto__属性：在对象创建时自动添加，默认值为构造函数的prototype属性值</p></li> <li><p>程序员能直接操作显示原型，不能直接操作隐式原型(ES6之前)</p></li></ul></li></ul> <p><strong>作用域</strong></p> <p>js没有块作用域(es6以后有)</p> <p><strong>闭包</strong></p> <p>当一个函数的内部(子)函数引用来嵌套的外部(父)函数的变量(函数)时，就产生了闭包。</p> <p><strong>闭包是什么？</strong></p> <p>使用chrom浏览器查看</p> <p>闭包是嵌套的内部函数(绝大多数人)</p> <p>闭包被引用变量(函数)的对象(极少人)</p> <p><strong>产生闭包的条件：</strong></p> <ul><li><p>函数嵌套</p></li> <li><p>内部函数引用了外部函数的数据(变量和函数)</p></li> <li><p>执行函数定义就会产生闭包(不用调用内部函数)</p></li></ul> <p><strong>闭包作用：</strong></p> <ul><li><p>使用函数内部的变量在函数执行完后，依然存在内存中(延长了局部变量的生命周期)</p></li> <li><p>让函数外部可以操作(读写)到函数内部的数据(变量/函数)</p></li></ul> <p>闭包的生命周期：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token number">2</span>   <span class="token comment">//函数提升，已经产生闭包，产生闭包前提是函数嵌套，内部函数有引用函数外部数据</span>
  <span class="token keyword">function</span> <span class="token function">f2</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    a<span class="token operator">++</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> f2
<span class="token punctuation">}</span>

<span class="token keyword">var</span> f <span class="token operator">=</span> <span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token function">f</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
f <span class="token operator">=</span> <span class="token keyword">null</span> <span class="token comment">//此时闭包才会死亡，f指向的闭包函数消失了，触发垃圾回收，就会死亡。</span>
</code></pre></div><p><strong>闭包应用</strong>：自定义js模块，把数据在内部私有，暴露方法来访问。</p> <p>有两种方式：</p> <ul><li><p>返回一个对象暴露访问</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">//创建myModules.js</span>
<span class="token keyword">function</span> <span class="token function">showMessage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token keyword">var</span> msg <span class="token operator">=</span> <span class="token string">&quot;hello&quot;</span>
  <span class="token keyword">function</span> <span class="token function">sayWord</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>msg<span class="token operator">+</span><span class="token string">&quot;world&quot;</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">function</span> <span class="token function">sayNiupi</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>msg<span class="token operator">+</span><span class="token string">&quot;niupi&quot;</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> <span class="token punctuation">{</span><span class="token literal-property property">sayWord</span><span class="token operator">:</span>sayWord<span class="token punctuation">,</span><span class="token literal-property property">sayNiupi</span><span class="token operator">:</span>sayNiupi<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>var msg = showMessage()
msg.sayWord()
msg.sayNiupi()</p> <div class="language- extra-class"><pre class="language-text"><code>
</code></pre></div></li> <li><p>匿名函数自调用绑定在window身上</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
   <span class="token keyword">var</span> msg <span class="token operator">=</span> <span class="token string">&quot;hello&quot;</span>
  <span class="token keyword">function</span> <span class="token function">sayWord</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>msg<span class="token operator">+</span><span class="token string">&quot;world&quot;</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">function</span> <span class="token function">sayNiupi</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>msg<span class="token operator">+</span><span class="token string">&quot;niupi&quot;</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
  window<span class="token punctuation">.</span>msg <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token literal-property property">sayWord</span><span class="token operator">:</span>sayWord<span class="token punctuation">,</span><span class="token literal-property property">sayNiupi</span><span class="token operator">:</span>sayNiupi<span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

msg<span class="token punctuation">.</span><span class="token function">sayWord</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
msg<span class="token punctuation">.</span><span class="token function">sayNiupi</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre></div></li></ul> <p><strong>闭包缺点以及解决方案</strong></p> <ul><li><p>缺点</p> <ul><li><p>函数执行完后，函数内的局部变量没有释放，占用内存时间会变长。</p></li> <li><p>容易造成内存泄漏</p></li></ul></li> <li><p>解决</p> <ul><li><p>能不用闭包就不用</p></li> <li><p>及时释放</p></li></ul></li></ul> <p><strong>内存溢出以及内存泄漏</strong></p> <ul><li><p>内存溢出</p> <ul><li><p>一个程序运行出现的错误</p></li> <li><p>当程序运行需要的内存超过来剩余内存时，就会抛出内存溢出的错误</p></li></ul></li> <li><p>内存泄漏</p> <ul><li><p>占用的内存没有及时释放</p></li> <li><p>内存泄漏积累多了就容易导致内存溢出</p></li> <li><p>常见的内存溢出</p> <ul><li><p>意外的全局变量</p></li> <li><p>没有及时清理的计时器或者回调函数</p></li> <li><p>闭包</p></li></ul></li></ul></li></ul> <p><strong>原型链继承</strong></p> <ul><li><p>定义父类型的构造函数</p></li> <li><p>给父类型的原型添加方法</p></li> <li><p>定义子类型的构造方法</p></li> <li><p>创建父类型的对象赋值给子类型的原型</p></li> <li><p>将子类型原型的构造属性设置为子类型</p></li> <li><p>给子类型原型添加方法</p></li> <li><p>创建子类型对象：可以调用父类型的方法</p> <p><strong>关键点：子类型的原型为父类型的一个实例对象</strong></p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">Supper</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>  <span class="token comment">//父类型</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>supProp<span class="token operator">=</span><span class="token string">&quot;fa&quot;</span>
<span class="token punctuation">}</span>
<span class="token class-name">Supper</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">showSupperProp</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>supProp<span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token comment">//子类型</span>
<span class="token keyword">function</span> <span class="token function">Sub</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>subProp <span class="token operator">=</span> <span class="token string">&quot;sub&quot;</span>
<span class="token punctuation">}</span>
<span class="token class-name">Sub</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">showSubprop</span> <span class="token operator">=</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>subProp<span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token comment">//将子类型的原型指向父类型的实例对象</span>
<span class="token class-name">Sub</span><span class="token punctuation">.</span>prototype <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Supper</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword">var</span> sub <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Sub</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
sub<span class="token punctuation">.</span><span class="token function">showSupperProp</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token comment">//可以调用父的方法</span>
</code></pre></div></li></ul> <p><strong>使用组合继承</strong></p> <ul><li><p>定义父类型构造函数</p></li> <li><p>定义子类型构造函数</p></li> <li><p>使用<strong>原型链继承</strong>来实现父子关系</p></li></ul> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">//定义父类型</span>
funtion <span class="token function">Person</span><span class="token punctuation">(</span><span class="token parameter">name<span class="token punctuation">,</span>age</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token operator">=</span>name
  <span class="token keyword">this</span><span class="token punctuation">.</span>age <span class="token operator">=</span> age
<span class="token punctuation">}</span>
<span class="token comment">//定义子类型</span>
<span class="token keyword">function</span> <span class="token function">Student</span><span class="token punctuation">(</span><span class="token parameter">name<span class="token punctuation">,</span>age<span class="token punctuation">,</span>price</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token function">Person</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span>name<span class="token punctuation">,</span>age<span class="token punctuation">)</span> <span class="token comment">//借助父类型的构造函数给对象赋值，但这个是假的继承，主要</span>
  <span class="token comment">//为了初始化属性用</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>price <span class="token operator">=</span> price
<span class="token punctuation">}</span>
<span class="token comment">//实现继承还得靠原型链继承</span>
<span class="token class-name">Student</span><span class="token punctuation">.</span>prototype <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">//就可以使用父的方法，实现真正的继承</span>
Student<span class="token punctuation">.</span>portotype<span class="token punctuation">.</span>constructor <span class="token operator">=</span> Student
</code></pre></div></div> <footer class="page-edit"><!----> <!----></footer> <!----> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.d13f59f1.js" defer></script><script src="/assets/js/2.53646e3a.js" defer></script><script src="/assets/js/15.0455f1d1.js" defer></script>
  </body>
</html>
